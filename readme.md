### Базы данных и SQL (семинары)

<details class="desc" data-name="lesson1"><summary>Урок 1. Установка СУБД, подключение к БД, просмотр и создание таблиц</summary>

[Работа во время семинара][work1]\
[Домашнее задание][home1]

```text
1. Создайте таблицу с мобильными телефонами, используя графический интерфейс. Заполните БД данными
2. Выведите название, производителя и цену для товаров, количество которых превышает 2
3. Выведите весь ассортимент товаров марки “Samsung”
4. Выведите информацию о телефонах, где суммарный чек больше 100 000 и меньше 145 000**

*** С помощью регулярных выражений найти (можно использовать операторы “LIKE”, “RLIKE” для 4.3):
4.1. Товары, в которых есть упоминание "Iphone"
4.2. "Galaxy"
4.3. Товары, в которых есть ЦИФРЫ
4.4. Товары, в которых есть ЦИФРА "8"
```

</details>

<details class="desc" data-name="lesson2"><summary>Урок 2. SQL – создание объектов, простые запросы выборки</summary>

[Работа во время семинара][work2]\
[Домашнее задание][home2]

```text
1. Используя операторы языка SQL, создайте табличку “sales”. Заполните ее данными
2. Сгруппируйте значений количества в 3 сегмента — меньше 100, 100-300 и больше 300.
3. Создайте таблицу “orders”, заполните ее значениями. Покажите “полный” статус заказа, используя оператор CASE

Дополнительное задание к первым 2 урокам:
1. CRUD - операции на любом ЯП. Коннект с БД через С#, к примеру

Файл со скриптом прикреплен к материалам(interview.sql):
№1. Используя оператор ALTER TABLE, установите внешний ключ в одной из таблиц (clients-posts)
№2. Без оператора JOIN, верните заголовок публикации, текст с описанием, идентификатор клиента, опубликовавшего публикацию и логин данного клиента.
№3. Выполните поиск по публикациям, автором которых является клиент "Mikle".
```

</details>

<details class="desc" data-name="lesson3"><summary>Урок 3. SQL – выборка данных, сортировка, агрегатные функции</summary>

[Работа во время семинара][work3]\
[Домашнее задание][home3]

```text
Отсортируйте данные по полю заработная плата (salary) в порядке: убывания; возрастания
Выведите 5 максимальных заработных плат (saraly)
Посчитайте суммарную зарплату (salary) по каждой специальности (роst)
Найдите кол-во сотрудников с специальностью (post) «Рабочий» в возрасте от 24 до 49 лет включительно.
Найдите количество специальностей
Выведите специальности, у которых средний возраст сотрудников меньше 30 лет

Доп:
Внутри каждой должности вывести ТОП-2 по ЗП (2 самых высокооплачиваемых сотрудника по ЗП внутри каждой должности)
Доп по базе данных для ВК(in progress):
....
-- Посчитать количество документов у каждого пользователя
-- Посчитать лайки для моих документов (моих медиа)
```

</details>

<details class="desc" data-name="lesson4"><summary>Урок 4. SQL – работа с несколькими таблицами</summary>

[Работа во время семинара][work4]\
[Домашнее задание][home4]

```text
Табличка: https://drive.google.com/file/d/1TZzW8ZlDdvIfDC9C46bUeILey6opQjdu/view?usp=share_link
Используя JOIN-ы, выполните следующие операции:
    Вывести всех котиков по магазинам по id (условие соединения shops.id = cats.shops_id)
    Вывести магазин, в котором продается кот “Мурзик” (попробуйте выполнить 2 способами)
    Вывести магазины, в которых НЕ продаются коты “Мурзик” и “Zuza”
Табличка (после слов “Последнее задание, таблица:”): https://drive.google.com/file/d/1TZzW8ZlDdvIfDC9C46bUeILey6opQjdu/view?usp=share_link
Вывести название и цену для всех анализов, которые продавались 5 февраля 2020 и всю следующую неделю.
Есть таблица анализов Analysis: (an_id — ID анализа; an_name — название анализа; an_cost — себестоимость анализа; an_price — розничная цена анализа; an_group — группа анализов.)
Есть таблица групп анализов Groups: (gr_id — ID группы; gr_name — название группы; gr_temp — температурный режим хранения.)
Есть таблица заказов Orders: (ord_id — ID заказа; ord_datetime — дата и время заказа; ord_an — ID анализа.)

Допы:
Табличка: https://drive.google.com/file/d/1PQn576YVakvlWrIgIjSP9YEf5id4cqYs/view?usp=sharing
1. Вывести на экран сколько машин каждого цвета для машин марок BMW и LADA
2. Вывести на экран марку авто и количество AUTO не этой марки

Допы к соц.сети:
Подсчитать общее количество лайков, которые получили пользователи младше 12 лет включительно.
Определить кто больше поставил лайков (всего): мужчины или женщины.
Вывести всех пользователей, которые не отправляли сообщения.
(по желанию)* Пусть задан некоторый пользователь. Из всех друзей этого пользователя найдите человека, который больше всех написал ему сообщений.
```

</details>

<details class="desc" data-name="lesson5"><summary>Урок 5. SQL – оконные функции</summary>

[Работа во время семинара][work5]\
[Домашнее задание][home5]

```text
Основное ДЗ (в презентации):
1. Создайте представление, в которое попадут автомобили стоимостью  до 25 000 долларов
2. Изменить в существующем представлении порог для стоимости: пусть цена будет до 30 000 долларов (используя оператор ALTER VIEW) 
3. Создайте представление, в котором будут только автомобили марки “Шкода” и “Ауди”

Добавьте новый столбец под названием «время до следующей станции». Чтобы получить это значение, мы вычитаем время станций
для пар смежных станций. Мы можем вычислить это значение без использования оконной функции SQL, но это может быть очень
сложно. Проще это сделать с помощью оконной функции LEAD . Эта функция сравнивает значения из одной строки со следующей
строкой, чтобы получить результат. В этом случае функция сравнивает значения в столбце «время» для станции со станцией
сразу после нее.

Доп:
Для скрипта, поставленного в прошлом уроке.
-- Получите друзей пользователя с id = 1
-- (решение задачи с помощью представления “друзья”)
-- Создайте представление, в котором будут выводится все сообщения, в которых принимал
-- участие пользователь с id = 1.
-- Получите список медиафайлов пользователя с количеством лайков(media m, likes l ,users u)
-- Получите количество групп у пользователей
1. Создайте представление, в которое попадет информация о пользователях (имя, фамилия, город и пол), которые не старше 20 лет.
2. Найдите кол-во, отправленных сообщений каждым пользователем и выведите ранжированный список пользователей, указав имя и фамилию пользователя, количество отправленных сообщений и место в рейтинге (первое место у пользователя с максимальным количеством сообщений) . (используйте DENSE_RANK)
3. Выберите все сообщения, отсортируйте сообщения по возрастанию даты отправления (created_at) и найдите разницу дат отправления между соседними сообщениями, получившегося списка. (используйте LEAD или LAG)
```

</details>

<details class="desc" data-name="lesson6"><summary>Урок 6. SQL – Транзакции. Временные таблицы, управляющие конструкции, циклы</summary>

~~[Работа во время семинара][work6]~~\
~~[Домашнее задание][home6]~~

```text
Текст Д/З
```

</details>

<details class="desc" style="display: none"><summary>Стили для IDE</summary>

<style>
.desc {
    margin: 0 0 0 1em;
    padding: 0 0 1em;
}
.desc summary {
    margin: 0 0 -1em;
    list-style-position: outside;
    cursor: pointer;
    
}
.desc pre {
    border: 1px solid #37b;
    margin: -1em 0 1.5em;
    padding: 0.3em 0.6em;
}
</style>

</details>

[work1]: lesson1/work.sql
[home1]: lesson1/homework.sql
[work2]: lesson2/work.sql
[home2]: lesson2/homework/homework.sql
[work3]: lesson3/work/
[home3]: lesson3/homework.sql
[work4]: lesson4/work/work.sql
[home4]: lesson4/homework/homework.sql
[work5]: lesson5/work/work.sql
[home5]: lesson5/homework/homework.sql

[work6]: lesson6/work/work.sql
[home6]: lesson6/homework/